!function(){if($axure.document.configuration.showPageNotes||$axure.document.configuration.showAnnotationsSidebar||$axure.document.configuration.showAnnotations){$(window.document).ready(function(){var e;($axure.document.configuration.showPageNotes||$axure.document.configuration.showAnnotationsSidebar)&&$axure.player.createPluginHost({id:"pageNotesHost",context:"inspect",title:"Documentation",gid:2}),$axure.document.configuration.showAnnotations&&$("#overflowMenuContainer").prepend('<div id="showNotesOption" class="showOption" style="order: 3"><div class="overflowOptionCheckbox"></div>Show Note Markers</div>'),function(){var e=$("#clippingBounds");if(!$("#notesOverlay").length){var t=document.createElement("div");t.setAttribute("id","notesOverlay"),e.prepend(t),$(t).append("&nbsp;")}}(),e="<div id='pageNotesHeader'>",e+="<div id='pageNotesToolbar' style='height: 12px;'>",e+="</div>",e+="</div>",e+="<div id='pageNotesScrollContainer'>",e+="<div id='pageNotesContainer'>",e+="<div id='pageNotesEmptyState' class='emptyStateContainer'><div class='emptyStateTitle'>No notes for this page.</div><div class='emptyStateContent'>Notes added in Axure RP will appear here.</div><div class='dottedDivider'></div></div>",e+="<span id='pageNotesContent'></span>",e+="</div></div>",$("#pageNotesHost").html(e),$axure.document.configuration.showAnnotations||$("#pageNotesHost .pageNameHeader").css("padding-right","55px"),$axure.player.isMobileMode()?$("#showNotesOption").hide():($("#showNotesOption").click(s),$("#showNotesOption").find(".overflowOptionCheckbox").addClass("selected")),$axure.page.bind("load.page_notes",function(){i();if($("#pageNotesContent").html(""),function(e){var t=!1;if($axure.document.configuration.showPageNotes){var o="";function n(e){var n=e.notes;if(n&&!$.isEmptyObject(n)){o+="<div class='notesPageNameHeader'>"+e.pageName+"</div>";var i=$axure.document.configuration.showPageNoteNames;for(var s in n)o+="<div class='pageNoteContainer'>",i&&(o+="<div class='pageNoteName'>"+s+"</div>"),o+="<div class='pageNote'>"+a(n[s])+"</div>",o+="</div>",t=!0}}if(n(e),e.masterNotes)for(var i=0;i<e.masterNotes.length;i++)n(e.masterNotes[i]);o.length>0&&(o+="<div class='lineDivider'></div>",$("#pageNotesContent").append("<div id='pageNotesSectionHeader' class='notesSectionHeader pluginNameHeader'>Page Notes</div>"+o))}if($axure.document.configuration.showAnnotationsSidebar){var s="";function r(e){if(e)for(var o=0;o<e.length;o++){var n=e[o];for(var i in s+="<div class='widgetNoteContainer' data-id='"+n.ownerId+"'>",s+="<div class='widgetNoteFootnote'>"+n.fn+"</div>",s+="<div class='widgetNoteLabel'>"+n.label+"</div>",n)"label"!=i&&"fn"!=i&&"ownerId"!=i&&(s+="<div class='pageNoteName'>"+i+"</div>",s+="<div class='pageNote'>"+a(n[i])+"</div>");s+="</div>",t=!0}}if(r(e.widgetNotes),e.masterNotes)for(i=0;i<e.masterNotes.length;i++)r(e.masterNotes[i].widgetNotes);s.length>0&&($("#pageNotesContent").append("<div id='widgetNotesSectionHeader' class='notesSectionHeader pluginNameHeader'>Widget Notes</div>"+s),$(".widgetNoteContainer").click(function(){var e=$(this).hasClass("widgetNoteContainerSelected");$(".widgetNoteContainerSelected").removeClass("widgetNoteContainerSelected"),e||$(this).addClass("widgetNoteContainerSelected");var t=$(".currentAdaptiveView").attr("data-dim"),o=t?t.split("x")[1]:"0",a=$(".leftPanel:visible"),n=!$axure.player.isMobileMode()&&a.length>0?a.width():0,i=$(".rightPanel:visible"),s=!$axure.player.isMobileMode()&&i.length>0?i.width():0,r={h:"0"!=o?o:"",scaleVal:$(".vpScaleOption").find(".selectedRadioButton").parent().attr("val"),height:$(".rightPanel").height(),panelWidthOffset:n+s};$axure.messageCenter.postMessage("toggleSelectWidgetNote",{id:this.getAttribute("data-id"),value:!e,view:r})}))}return t}($axure.page)?$("#pageNotesEmptyState").hide():$("#pageNotesEmptyState").show(),$axure.player.isMobileMode())$axure.messageCenter.postMessage("annotationToggle",!1);else if(1==$axure.document.configuration.showAnnotations){var e=$axure.player.getHashStringVar(FOOTNOTES_VAR_NAME);e.length>0&&0==e?($("#showNotesOption").find(".overflowOptionCheckbox").removeClass("selected"),$axure.messageCenter.postMessage("annotationToggle",!1)):$("#showNotesOption").find(".overflowOptionCheckbox").hasClass("selected")||$axure.messageCenter.postMessage("annotationToggle",!1)}return $("#notesOverlay").off("click"),$("#notesOverlay").on("click",".closeNotesDialog",function(){var e=$(this).attr("data-ownerid");o(e)}),$axure.player.updatePlugins(),!1}),$axure.messageCenter.addMessageListener(function(e,t){"toggleAnnDialog"==e&&o(t.id,t.x,t.y,t.page)})});var e=1,t={},o=function(o,n,i,s){if(t[o]){var r=t[o];return t[o]=void 0,r.find(".notesDialogScroll").getNiceScroll().remove(),void r.remove()}var d=!1,l=!1,c=$("#mainPanelContainer").position(),g=parseInt($("#mainPanelContainer").css("margin-left")),v=i+c.top,u=n+g;u>310&&(d=!0),v>310&&(l=!0);var p=0,N=0;p=l?v-300-20:v+10,N=d?u-300-4:u-6,e+=1;var m,f,w,h,x,C;r=$('<div class="notesDialog"></div>').appendTo("#notesOverlay").html(function(e,t){var o=t||$axure.page,n="";function i(t){for(var o=0;o<t.length;o++){var i=t[o];if(i.ownerId==e){for(var s in n+="<div class='widgetNoteContainer' data-id='"+i.ownerId+"'>",n+="<div class='widgetNoteFootnote'>"+i.fn+"</div>",n+="<div class='widgetNoteLabel'>"+i.label+"</div>",i)"label"!=s&&"fn"!=s&&"ownerId"!=s&&(n+="<div class='pageNoteName'>"+s+"</div>",n+="<div class='pageNote'>"+a(i[s])+"</div>");n+="</div>"}}}if(n+="<div data-ownerid='"+e+"' class='closeNotesDialog'></div>",n+="<div class='notesDialogScroll'>",i(o.widgetNotes),o.masterNotes)for(var s=0;s<o.masterNotes.length;s++)i(o.masterNotes[s].widgetNotes);return n+="</div>",n+="<div class='resizeNotesDialog'></div>"}(o,s));function S(){var e=window.event.pageX,t=window.event.pageY;r.css({left:w+e-m,top:h+t-f})}function b(){$("div.splitterMask").remove(),r.removeClass("active"),$(document).unbind($axure.eventNames.mouseMoveName,S).unbind($axure.eventNames.mouseUpName,b),r.find(".notesDialogScroll").getNiceScroll().resize(),r.find(".notesDialogScroll").getNiceScroll().show()}function O(){var e=window.event.pageX,t=window.event.pageY,o=Math.max(200,x+e-m),a=Math.max(200,C+t-f);r.css({width:o,height:a})}function M(){$("div.splitterMask").remove(),r.removeClass("active"),$(document).unbind($axure.eventNames.mouseMoveName,O).unbind($axure.eventNames.mouseUpName,M),r.find(".notesDialogScroll").getNiceScroll().resize(),r.find(".notesDialogScroll").getNiceScroll().show()}r.css({left:N,top:p,"z-index":e}),r.find(".notesDialogScroll").niceScroll({cursorcolor:"#8c8c8c",cursorborder:"0px solid #fff"}),r.find(".notesDialogScroll").on($axure.eventNames.mouseDownName,function(e){e.stopPropagation()}),r.find(".closeNotesDialog").on($axure.eventNames.mouseDownName,function(e){e.stopPropagation()}),r.on($axure.eventNames.mouseDownName,function(){m=window.event.pageX,f=window.event.pageY;var e=r.position();w=e.left,h=e.top,r.addClass("active"),$('<div class="splitterMask"></div>').insertAfter($("#notesOverlay")),$(document).bind($axure.eventNames.mouseMoveName,S).bind($axure.eventNames.mouseUpName,b),r.find(".notesDialogScroll").getNiceScroll().hide()}),r.find(".resizeNotesDialog").on($axure.eventNames.mouseDownName,function(){event.stopPropagation(),m=window.event.pageX,f=window.event.pageY,x=Number(r.css("width").replace("px","")),C=Number(r.css("height").replace("px","")),r.addClass("active"),$('<div class="splitterMask"></div>').insertAfter($("#notesOverlay")),$(document).bind($axure.eventNames.mouseMoveName,O).bind($axure.eventNames.mouseUpName,M),r.find(".notesDialogScroll").getNiceScroll().hide()}),t[o]=r};$(document).on("sidebarCollapse",function(e,t){n()}),$(document).on("pluginShown",function(e,t){2!=t&&n()}),$axure.player.toggleFootnotes=function(e){$("#showNotesOption").find(".overflowOptionCheckbox").hasClass("selected")?e||$("#showNotesOption").click():e&&$("#showNotesOption").click()}}function a(e){return e.replace(/(\b(((https?|ftp|file):\/\/)|(www\.))[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,function(e,t,o){return'<a href="'+("www."==o?"http://"+e:e)+'" target="_blank" class="noteLink">'+e+"</a>"})}function n(){var e=$("#pageNotesContainer").find(".widgetNoteContainerSelected");e.length>0&&(e.removeClass("widgetNoteContainerSelected"),$axure.messageCenter.postMessage("toggleSelectWidgetNote",{id:"",value:!1}))}function i(){for(var e in t){void 0!==t[e]&&o(e)}}function s(e){var t=$("#showNotesOption").find(".overflowOptionCheckbox");t.hasClass("selected")?(i(),t.removeClass("selected"),$axure.messageCenter.postMessage("annotationToggle",!1),$axure.player.setVarInCurrentUrlHash(FOOTNOTES_VAR_NAME,0)):(t.addClass("selected"),$axure.messageCenter.postMessage("annotationToggle",!0),$axure.player.deleteVarFromCurrentUrlHash(FOOTNOTES_VAR_NAME))}}();