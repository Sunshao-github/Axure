$axure.internal(function(e){e.adaptive={},$axure.utils.makeBindable(e.adaptive,["viewChanged"]);var t,i,a,r,n=!0,l=!1,o=[],s=!1;e.adaptive.loadFinished=function(){s||(s=!0,e.adaptive.currentViewId?e.viewChangePageAndMasters():e.postAdaptiveViewChanged())};var d=function(e){if(n&&(!n||!l||e)){var t=$(window),i=t.height(),a=t.width(),r=b(a,i),o=r&&r.id;v(o,e)}},c=e.adaptive.setAuto=function(e){n!=e&&(n=Boolean(e))},u=function(e,t){$jobj(e).attr("src",t)},v=function(t,i){var a=e.adaptive.currentViewId;void 0===a&&(a=""),void 0===t&&(t=""),t!=a?(e("*").each(function(t,i){if(e.public.fn.IsTreeNodeObject(t.type)&&t.hasOwnProperty("isExpanded")){var a=e("#"+i),r=t.isExpanded;a.expanded(r)}}),$axure("*").each(function(t,i){if(!t.isContained&&!e.getParentRepeaterFromElementIdExcludeSelf(i)){var a=document.getElementById(i);if(a){var r={top:"",left:"",width:"",height:"",opacity:"",transform:"",webkitTransform:"",MozTransform:"",msTransform:"",OTransform:""},n=$(a);if(n.css(r),!e.public.fn.IsDynamicPanel(t.type)||t.fitToContent){t.fitToContent&&e.dynamicPanelManager.setFitToContentCss(i,!0);var l=n.children();l.length&&l.css(r)}e.dynamicPanelManager.resetFixedPanel(t,a),e.dynamicPanelManager.resetAdaptivePercentPanel(t,a)}}}),e.adaptive.currentViewId=t,a?(e.style.clearAdaptiveStyles(),$("*").removeClass(a)):e.style.reselectElements(),$axure("*").each(function(t,i){e.getParentRepeaterFromElementIdExcludeSelf(i)||e.style.updateElementIdImageStyle(i)}),t?(e.visibility.clearLimboAndHidden(),e.visibility.clearMovedAndResized(),g(t),e.repeater.refreshAllRepeaters(),e.dynamicPanelManager.updateAllLayerSizeCaches(),e.dynamicPanelManager.updateParentsOfNonDefaultFitPanels()):($axure("*").each(function(t,i){if(!e.getParentRepeaterFromElementIdExcludeSelf(i)){e.placeholderManager.refreshPlaceholder(i);var a=t.images;if("horizontalLine"==t.type||"verticalLine"==t.type){var r=a["start~"];u(i+"_start",r);var n=a["end~"];u(i+"_end",n);var l=a["line~"];u(i+"_line",l)}else if(t.type==e.constants.CONNECTOR_TYPE)p(i,a,"");else if(a)if(t.generateCompound){if(e.style.IsWidgetDisabled(i))return void((o=f(a,"disabled~"))&&e.style.applyImage(i,o,"disabled"));if(e.style.IsWidgetSelected(i))return void((s=f(a,"selected~"))&&e.style.applyImage(i,s,"selected"));e.style.applyImage(i,f(a,"normal~"),"normal")}else{if(e.style.IsWidgetDisabled(i)){var o=y(i,a,[],"disabled",!0);return void(o&&e.style.applyImage(i,o,"disabled"))}if(e.style.IsWidgetSelected(i)){var s=y(i,a,[],"selected",!0);return void(s&&e.style.applyImage(i,s,"selected"))}var d=y(i,a,[],"normal",!0);e.style.applyImage(i,d,"normal")}var c=$jobj(i).children(".text");c.length&&e.style.transformTextWithVerticalAlignment(c[0].id,function(){})}}),e.visibility.resetLimboAndHiddenToDefaults(),e.visibility.clearMovedAndResized(),e.repeater.refreshAllRepeaters(),e.dynamicPanelManager.updateParentsOfNonDefaultFitPanels(),e.dynamicPanelManager.updatePercentPanelCache(e("*"))),e.annotation.updateAllFootnotes(),e.adaptive.triggerEvent("viewChanged",{}),s&&e.viewChangePageAndMasters(i)):i&&e.postAdaptiveViewChanged(i)},f=function(e,t){var i={};for(var a in e){var r=e[a][t];r&&(i[a]=r)}return i},h=e.adaptive.getAdaptiveIdChain=function(e){if(!e)return[];for(var t=[],a=i[e];a;)t[t.length]=a.id,a=i[a.baseViewId];return t.reverse()},p=(e.adaptive.getMasterAdaptiveIdChain=function(t,i){if(!i)return[];var a=e.pageData.masters[t].adaptiveViews,r={};if(a&&a.length>0)for(var n=0;n<a.length;n++){r[(l=a[n]).id]=l}if(!r)return[];for(var l,o=[],s=l=r[i];s;)o[o.length]=s.id,s=r[s.baseViewId];return o.reverse()},e.adaptive.getPageStyle=function(){for(var t=e.adaptive.currentViewId,i=h(t),a=$.extend({},e.pageData.page.style),r=0;r<i.length;r++){var n=i[r];$.extend(a,e.pageData.page.adaptiveStyles[n])}return a},function(e,t,i){for(var a=$jobj(e).children().length-1,r=0;r<a;r++){var n=t[r+"~"+i];$jobj(e+"_seg"+r).attr("src",n)}}),g=e.adaptive.applyView=function(t,i){var a,r={},n={};if(i){a=(a=i.jQuery()).add(a.find("*"));var l=e.annotation.jQueryAnn(i);a=a.add(l)}else a=$("*").not("#ios-safari-fixed"),i=e("*");a.addClass(t);var o=h(t);i.each(function(e,i){m(e,i,o,t,r,n)}),e.visibility.addLimboAndHiddenIds(r,n,i),e.dynamicPanelManager.updatePercentPanelCache(i)},m=function(t,i,a,r,n,l){for(var o=[],s=0;s<a.length;s++){r=a[s];var d=t.adaptiveStyles[r];d&&(o[o.length]=d,d.size&&e.public.fn.convertToSingleImage($jobj(i)))}var c=e.style.generateState(i),v=t.images;if(v)if("horizontalLine"==t.type||"verticalLine"==t.type)!function(e,t,i){for(var a=i.length-1;a>=0;a--){var r=i[a],n=t["start~"+r];if(n){u(e+"_start",n);var l=t["end~"+r];u(e+"_end",l);var o=t["line~"+r];u(e+"_line",o);break}}}(i,v,a);else if(t.type==e.constants.CONNECTOR_TYPE)p(i,v,r);else if(t.generateCompound){var f=I(t,i,a,c);f&&e.style.applyImage(i,f,c)}else{var h=y(i,v,a,c);h&&e.style.applyImage(i,h,c)}var g=e.style.computeAllOverrides(i,void 0,c,r),m=$.extend({},t.style,g);t.isContained||e.style.setAdaptiveStyle(i,g);var w=e.repeater.getScriptIdFromElementId(i);m.limbo&&!t.isContained&&(n[w]=!0),!1===m.visible&&(l[w]=!0)},y=function(t,i,a,r,n){var l=e.style.getElementImageOverride(t,r);if(l)return l;if(!i)return;let o=e.repeater.getScriptIdFromElementId(t);if("disabled"==r&&e.style.IsWidgetSelected(t)||"selected"==r&&e.style.IsWidgetDisabled(t)){let i=e.getObjectFromElementId(t);if(i&&e.public.fn.IsSelectionButton(i.type))var s=e.constants.SELECTED_DISABLED}for(let e=a.length-1;e>=0;e--){let t=a[e];if(s){let e=w(i,o,s,t);if(e)return e}else{let e=w(i,o,r,t);if(e)return e}}if(s){let e=w(i,o,s);if(e)return e}else{let e=w(i,o,r);if(e)return e}return n?void 0:(r=e.style.progessState(r))?y(o,i,a,r):i["normal~"]};let w=function(e,t,i,a){if(!e)return;a||(a="");let r=e[t+"~"+i+"~"+a];return r||(r=e[i+"~"+a]),r};var I=function(e,t,i,a){for(var r=[],n=0;n<e.compoundChildren.length;n++){var l=e.compoundChildren[n];r[l]=y(t,e.images[l],i,a)}return r};e.adaptive.getImageForStateAndView=function(t,i){var a=h(e.adaptive.currentViewId),r=e.getObjectFromElementId(t);return r.generateCompound?I(r,t,a,i):y(t,r.images,a,i)};var b=function(t,i){var a=function(e,t,i){return e.size.width>t.size.width||e.size.width==t.size.width&&(t.size.height<=i?e.size.height>t.size.height&&e.size.height<=i:e.size.height<t.size.height)},r=function(e,t){var i=t.size.width||1e6,a=t.size.height||1e6,r=e.size.width||1e6,n=e.size.height||1e6;return r<i||r==i&&n<a},n=function(e,t){return t>=e.size.width},l=function(e,t){return t<=(e.size.width||1e6)},s=void 0,d=void 0,c=e.pageData.defaultAdaptiveView;n(c,t)&&(s=c),d=c;for(var u=0;u<o.length;u++){var v=o[u];n(v,t)&&(s&&!a(v,s,i)||(s=v)),l(v,t)&&(d&&!r(v,d)||(d=v))}return s||d},S=function(){return void 0!==i};e.messageCenter.addMessageListener(function(t,i){if("switchAdaptiveView"==t){if(!$axure.utils.isInPlayer())return;var n=window.location.href.split("#")[0],o=n.lastIndexOf("/");if((n=n.substring(o+1))!=i.src)return;var s="auto"==i.view?void 0:"default"==i.view?"":i.view;S()?A(s):a=s}else if("setAdaptiveViewForSize"==t){if(!$axure.utils.isInPlayer())return;l=!0,S()?M(i.width,i.height):r=i}else if("getScale"==t){if(!$axure.utils.isInPlayer())return;var d=i.prevScaleN,c=1,u=0,v=$("body");if(v.css("height",""),0!=i.scale){var f=!1;0!=$("html").getNiceScroll().length||MOBILE_DEVICE||(x($("html"),{emulatetouch:!1,horizrailenabled:!1}),f=!0),$("html").css("overflow-x","hidden");var h=v.width(),p="relative"==v.css("position"),g=0!=window.orientation&&180!=window.orientation,m=(IOS&&g?window.screen.height:window.screen.width)-i.panelWidthOffset,y=c=(MOBILE_DEVICE?m:$(window).width())/h;if(2==i.scale){var w=e.public.fn.getPageSize(),I=(MOBILE_DEVICE?i.viewportHeight:$(window).height())/Math.max(1,w.bottom);I<y&&(y=c=I),p&&(u=y*(h/2))}if(SAFARI&&IOS||SHARE_APP){w=e.public.fn.getPageSize();v.first().css("height",w.bottom+"px")}f&&(P($("html")),x($("html"),{emulatetouch:!1,horizrailenabled:!1,cursorwidth:Math.ceil(6/c)+"px",cursorborder:1/c+"px solid #fff",cursorborderradius:5/c+"px"}))}var b={scaleN:c,prevScaleN:d,contentOriginOffset:u,clipToView:i.clipToView,viewportHeight:i.viewportHeight,viewportWidth:i.viewportWidth,panelWidthOffset:i.panelWidthOffset,scale:i.scale};$axure.messageCenter.postMessage("setContentScale",b)}else if("setDeviceMode"==t){if(!$axure.utils.isInPlayer())return;E=i.device,i.device?(P($("html"),!0),MOBILE_DEVICE||(x($("html"),{emulatetouch:!0,horizrailenabled:!1},!0),$("html").addClass("mobileFrameCursor"),$("html").css("cursor","url(resources/css/images/touch.cur), auto"),$("html").css("cursor","url(resources/css/images/touch.svg) 32 32, auto"),$("html").css("overflow-x","hidden"),IE&&document.addEventListener("click",function(){this.activeElement.releasePointerCapture()},!1),$axure.browser.isEdge&&document.addEventListener("pointerdown",function(e){this.activeElement.releasePointerCapture(e.pointerId)},!1),e.dynamicPanelManager.initMobileScroll()),$("html").css("overflow-x","hidden"),$("body").css("margin","0px"),$(function(){z(!1)})):(P($("html"),!0),$("html").css("overflow-x",""),$("html").css("cursor",""),$("body").css("margin",""),$("html").removeClass("mobileFrameCursor"),$(function(){z(!i.scaleToWidth)}),e.dynamicPanelManager.initMobileScroll())}});var E=!1;e.adaptive.isDeviceMode=function(){return E};var C=function(e){return e.length>0&&e[0]==$("html")[0]},P=e.adaptive.removeNiceScroll=function(e,t){t||(e.scrollLeft(0),e.scrollTop(0));var i=e.getNiceScroll(),a=i.length>0&&i[0].opt.emulateTouch;i.remove(),IE&&e.css({"-ms-overflow-y":"","overflow-y":"","-ms-overflow-style":"","-ms-touch-action":""}),a&&(C(e)?($("#scrollContainer").remove(),$("#base").off("mouseleave.ax")):e.off("mouseleave.ax"))},x=e.adaptive.addNiceScroll=function(e,t,i){i||(e.scrollLeft(0),e.scrollTop(0)),e.niceScroll(t),t.emulatetouch&&function(e){if(C(e)){var t=$("<div id='scrollContainer'></div>"),i=$("body");t.css({position:"fixed",width:i.width(),height:i.height()});var a=$("#base");a.on("mouseleave.ax",function(t){for(var i=e.getNiceScroll(),a=0;a<i.length;++a)i[a].ontouchend(t)}),a.prepend(t)}else e.on("mouseleave.ax",function(t){for(var i=e.getNiceScroll(),a=0;a<i.length;++a)i[a].ontouchend(t)})}(e),IE&&e.css({"-ms-overflow-y":"","-ms-overflow-style":""}),IOS&&e.css({"overflow-y":""})};e.adaptive.getNiceScrollContainer=function(e){for(var t=e;t;){if($(t).getNiceScroll().length>0)return t;t=t.parentElement}},e.adaptive.updateMobileScrollOnBody=function(){var e=$("html").getNiceScroll();0!=e.length&&e.resize()};var z=function(e){var t=$(document);e?t.unbind("scroll"):t.bind("scroll",function(){0!==t.scrollLeft()&&t.scrollLeft(0)})};e.adaptive.setAdaptiveView=function(e){var t="auto"==e?void 0:"default"==e?"":e;S()?A(t):a=t},e.adaptive.initialize=function(){t=e.pageData.adaptiveViews,i={};var n=e.document.configuration.useViews;if(t&&t.length>0){for(var s=0;s<t.length;s++){var c=t[s];i[c.id]=c,n&&(o[o.length]=c)}l&&r?M(r.width,r.height):A(a)}$axure.resize(function(t){d(),e.postResize(t)})};var A=function(e,t){void 0!==e?(c(!1),v("default"!=e?e:"",t)):(c(!0),d(t))},M=function(e,t){var i=b(e,t),a=i&&i.id;v(a,"auto")};e.adaptive.getSketchKey=function(){return e.pageData.sketchKeys[e.adaptive.currentViewId||""]}});